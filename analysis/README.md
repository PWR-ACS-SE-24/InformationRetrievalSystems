# Stage 4

## Starting up

Start analysis stack with `./docker_up.sh`. If `elasticsearch` container fails to start you might want to increase max amount of memory maps with `sudo sysctl -w vm.max_map_count=262144`. By default both containers use 6GB of memory and all available cores.

## Teardown

Use `./docker_destroy.sh` to destroy all containers and their data.

## Benchmarking

Before benchmarking you'll have to download arxiv dataset from [kaggle](https://www.kaggle.com/datasets/Cornell-University/arxiv) and extract it here. Running `prepare_typesense.py` and `prepare_elastic.py` will set up appropriate database.

## Analysis

todo(@mlodybercik and @jakubzehner)

## Misc stuff

<details>
<summary>arxiv categories</summary>
```json
{
  "acc-phys": 49,
  "adap-org": 584,
  "alg-geom": 1423,
  "ao-sci": 17,
  "astro-ph": 105380,
  "astro-ph.CO": 71029,
  "astro-ph.EP": 31260,
  "astro-ph.GA": 69248,
  "astro-ph.HE": 61837,
  "astro-ph.IM": 31502,
  "astro-ph.SR": 63698,
  "atom-ph": 123,
  "bayes-an": 16,
  "chao-dyn": 2398,
  "chem-ph": 251,
  "cmp-lg": 894,
  "comp-gas": 221,
  "cond-mat": 14215,
  "cond-mat.dis-nn": 24703,
  "cond-mat.mes-hall": 94751,
  "cond-mat.mtrl-sci": 98709,
  "cond-mat.other": 16224,
  "cond-mat.quant-gas": 22328,
  "cond-mat.soft": 41891,
  "cond-mat.stat-mech": 76453,
  "cond-mat.str-el": 77270,
  "cond-mat.supr-con": 44778,
  "cs.AI": 121355,
  "cs.AR": 6102,
  "cs.CC": 11524,
  "cs.CE": 8400,
  "cs.CG": 7279,
  "cs.CL": 81289,
  "cs.CR": 38589,
  "cs.CV": 151541,
  "cs.CY": 22384,
  "cs.DB": 9785,
  "cs.DC": 24149,
  "cs.DL": 5294,
  "cs.DM": 14238,
  "cs.DS": 25833,
  "cs.ET": 5487,
  "cs.FL": 5325,
  "cs.GL": 218,
  "cs.GR": 7343,
  "cs.GT": 12711,
  "cs.HC": 22417,
  "cs.IR": 20070,
  "cs.IT": 49625,
  "cs.LG": 212326,
  "cs.LO": 17197,
  "cs.MA": 9006,
  "cs.MM": 7677,
  "cs.MS": 2358,
  "cs.NA": 27936,
  "cs.NE": 15730,
  "cs.NI": 24156,
  "cs.OH": 2239,
  "cs.OS": 1055,
  "cs.PF": 4374,
  "cs.PL": 8504,
  "cs.RO": 40014,
  "cs.SC": 2763,
  "cs.SD": 16607,
  "cs.SE": 19930,
  "cs.SI": 21395,
  "cs.SY": 36969,
  "dg-ga": 732,
  "econ.EM": 4253,
  "econ.GN": 4985,
  "econ.TH": 2955,
  "eess.AS": 17729,
  "eess.IV": 26976,
  "eess.SP": 32688,
  "eess.SY": 28747,
  "funct-an": 427,
  "gr-qc": 112752,
  "hep-ex": 56253,
  "hep-lat": 29015,
  "hep-ph": 186585,
  "hep-th": 172786,
  "math-ph": 83485,
  "math.AC": 13583,
  "math.AG": 55097,
  "math.AP": 66593,
  "math.AT": 16463,
  "math.CA": 23342,
  "math.CO": 70639,
  "math.CT": 9192,
  "math.CV": 17886,
  "math.DG": 44186,
  "math.DS": 39015,
  "math.FA": 32914,
  "math.GM": 4242,
  "math.GN": 5435,
  "math.GR": 23439,
  "math.GT": 23886,
  "math.HO": 3851,
  "math.IT": 49625,
  "math.KT": 6168,
  "math.LO": 14100,
  "math.MG": 11847,
  "math.MP": 83485,
  "math.NA": 41743,
  "math.NT": 44418,
  "math.OA": 13166,
  "math.OC": 53428,
  "math.PR": 59825,
  "math.QA": 19688,
  "math.RA": 18322,
  "math.RT": 27626,
  "math.SG": 9490,
  "math.SP": 10214,
  "math.ST": 24741,
  "mtrl-th": 262,
  "nlin.AO": 7490,
  "nlin.CD": 16247,
  "nlin.CG": 1567,
  "nlin.PS": 10133,
  "nlin.SI": 12275,
  "nucl-ex": 26803,
  "nucl-th": 59254,
  "patt-sol": 650,
  "physics.acc-ph": 8146,
  "physics.ao-ph": 7187,
  "physics.app-ph": 20490,
  "physics.atm-clus": 2843,
  "physics.atom-ph": 22173,
  "physics.bio-ph": 16258,
  "physics.chem-ph": 24065,
  "physics.class-ph": 8871,
  "physics.comp-ph": 24834,
  "physics.data-an": 10960,
  "physics.ed-ph": 4117,
  "physics.flu-dyn": 30364,
  "physics.gen-ph": 10531,
  "physics.geo-ph": 7714,
  "physics.hist-ph": 5176,
  "physics.ins-det": 22346,
  "physics.med-ph": 7740,
  "physics.optics": 50094,
  "physics.plasm-ph": 17811,
  "physics.pop-ph": 2523,
  "physics.soc-ph": 23228,
  "physics.space-ph": 6927,
  "plasm-ph": 38,
  "q-alg": 1578,
  "q-bio": 1356,
  "q-bio.BM": 6084,
  "q-bio.CB": 2284,
  "q-bio.GN": 3378,
  "q-bio.MN": 3875,
  "q-bio.NC": 10449,
  "q-bio.OT": 1376,
  "q-bio.PE": 11993,
  "q-bio.QM": 11457,
  "q-bio.SC": 1732,
  "q-bio.TO": 2419,
  "q-fin.CP": 2706,
  "q-fin.EC": 5549,
  "q-fin.GN": 2768,
  "q-fin.MF": 2790,
  "q-fin.PM": 2030,
  "q-fin.PR": 2041,
  "q-fin.RM": 2487,
  "q-fin.ST": 3830,
  "q-fin.TR": 1938,
  "quant-ph": 160037,
  "solv-int": 1413,
  "stat.AP": 20273,
  "stat.CO": 8984,
  "stat.ME": 30057,
  "stat.ML": 70197,
  "stat.OT": 1439,
  "stat.TH": 24742,
  "supr-con": 175
}
```
</details>
